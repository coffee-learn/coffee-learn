(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(global){(function(){var Datasets,Math,Models,Train,cflearn;cflearn={};module.exports=cflearn;Math=require("./math/matrix");Models=require("./models/models");Train=require("./train/train");Datasets=require("./datasets/datasets");cflearn.Math=Math;cflearn.Models=Models;cflearn.Train=Train;cflearn.Datasets=Datasets;global.cflearn=cflearn}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./datasets/datasets":2,"./math/matrix":4,"./models/models":5,"./train/train":11}],2:[function(require,module,exports){(function(){var Datasets,OR,XOR,_ref;Datasets={};module.exports=Datasets;_ref=require("./logical_operation"),OR=_ref.OR,XOR=_ref.XOR;Datasets.OR=OR;Datasets.XOR=XOR}).call(this)},{"./logical_operation":3}],3:[function(require,module,exports){(function(){module.exports.OR={x:[[0,0],[0,1],[1,0],[1,1]],y:[[0],[1],[1],[1]]};module.exports.XOR={x:[[0,0],[0,1],[1,0],[1,1]],y:[[0],[1],[1],[0]]}}).call(this)},{}],4:[function(require,module,exports){(function(){var Matrix;module.exports.Matrix=Matrix=function(){function Matrix(array){this.matrix=array}Matrix.prototype.matrix=function(){return this.matrix};Matrix.prototype.row=function(){return this.matrix.length};Matrix.prototype.col=function(){return this.matrix[0].length};Matrix.prototype.T=function(){var array,col,row,t_matrix,_i,_j,_ref,_ref1;t_matrix=[];for(col=_i=0,_ref=this.col();0<=_ref?_i<_ref:_i>_ref;col=0<=_ref?++_i:--_i){array=[];for(row=_j=0,_ref1=this.row();0<=_ref1?_j<_ref1:_j>_ref1;row=0<=_ref1?++_j:--_j){array.push(this.matrix[row][col])}t_matrix.push(array)}return new Matrix(t_matrix)};Matrix.prototype.inv=function(){var INV,M,N,col,i,j,k,mul,n,pivot,row,_i,_j,_k,_l,_len,_m,_n,_o,_p,_q,_r,_ref,_ref1,_ref2,_ref3,_ref4,_ref5;if(this.col()!==this.row()){throw new Error("matrix dimensions are not valid")}M=JSON.parse(JSON.stringify(this.matrix));N=this.row();for(row=_i=0;0<=N?_i<N:_i>N;row=0<=N?++_i:--_i){for(col=_j=0;0<=N?_j<N:_j>N;col=0<=N?++_j:--_j){if(col===row){M[row].push(1)}else{M[row].push(0)}}}for(i=_k=0;0<=N?_k<N:_k>N;i=0<=N?++_k:--_k){pivot=M[i][i];for(j=_l=0,_ref=2*N;0<=_ref?_l<_ref:_l>_ref;j=0<=_ref?++_l:--_l){M[i][j]=1/pivot*M[i][j]}for(k=_m=_ref1=i+1;_ref1<=N?_m<N:_m>N;k=_ref1<=N?++_m:--_m){mul=M[k][i];for(n=_n=i,_ref2=2*N;i<=_ref2?_n<_ref2:_n>_ref2;n=i<=_ref2?++_n:--_n){M[k][n]=M[k][n]-mul*M[i][n]}}}for(i=_o=_ref3=N-1;_ref3<=0?_o<0:_o>0;i=_ref3<=0?++_o:--_o){for(k=_p=_ref4=i-1;_ref4<=0?_p<=0:_p>=0;k=_ref4<=0?++_p:--_p){mul=M[k][i];for(n=_q=i,_ref5=2*N;i<=_ref5?_q<_ref5:_q>_ref5;n=i<=_ref5?++_q:--_q){M[k][n]=M[k][n]-mul*M[i][n]}}}INV=[];for(_r=0,_len=M.length;_r<_len;_r++){row=M[_r];INV.push(row.slice(N,+(2*N)+1||9e9))}return new Matrix(INV)};Matrix.zeros=function(row,col,fill){var array,c,matrix,r,_i,_j;if(fill==null){fill=0}matrix=[];for(r=_i=0;0<=row?_i<row:_i>row;r=0<=row?++_i:--_i){array=[];for(c=_j=0;0<=col?_j<col:_j>col;c=0<=col?++_j:--_j){array.push(fill)}matrix.push(array)}return new Matrix(matrix)};Matrix.identify=function(n,fill){var E,col,row,_i,_j,_ref,_ref1;if(n==null){n=2}if(fill==null){fill=1}E=Matrix.zeros(n,n);for(row=_i=0,_ref=E.row;0<=_ref?_i<_ref:_i>_ref;row=0<=_ref?++_i:--_i){for(col=_j=0,_ref1=E.col;0<=_ref1?_j<_ref1:_j>_ref1;col=0<=_ref1?++_j:--_j){if(row===col){E.matrix[row][col]=fill}}}return E};Matrix.add=function(matrix_A,matrix_B){var answer,col,row,_i,_j,_ref,_ref1;if(matrix_A.row()!==matrix_B.row()||matrix_A.col()!==matrix_B.col()){throw new Error("matrix dimensions are not valid")}answer=[];for(row=_i=0,_ref=matrix_A.row();0<=_ref?_i<_ref:_i>_ref;row=0<=_ref?++_i:--_i){answer.push([]);for(col=_j=0,_ref1=matrix_B.col();0<=_ref1?_j<_ref1:_j>_ref1;col=0<=_ref1?++_j:--_j){answer[row][col]=matrix_A.matrix[row][col]+matrix_B.matrix[row][col]}}return new Matrix(answer)};Matrix.sub=function(matrix_A,matrix_B){var answer,col,row,_i,_j,_ref,_ref1;if(matrix_A.row()!==matrix_B.row()||matrix_A.col()!==matrix_B.col()){throw new Error("matrix dimensions are not valid")}answer=[];for(row=_i=0,_ref=matrix_A.row();0<=_ref?_i<_ref:_i>_ref;row=0<=_ref?++_i:--_i){answer.push([]);for(col=_j=0,_ref1=matrix_B.col();0<=_ref1?_j<_ref1:_j>_ref1;col=0<=_ref1?++_j:--_j){answer[row][col]=matrix_A.matrix[row][col]-matrix_B.matrix[row][col]}}return new Matrix(answer)};Matrix.dot=function(matrix_A,matrix_B){var answer,array,col,i,row,sum,_i,_j,_k,_ref,_ref1,_ref2;if(matrix_A.col()!==matrix_B.row()){throw new Error("matrix dimensions are not valid")}answer=[];for(row=_i=0,_ref=matrix_A.row();0<=_ref?_i<_ref:_i>_ref;row=0<=_ref?++_i:--_i){array=[];for(col=_j=0,_ref1=matrix_B.col();0<=_ref1?_j<_ref1:_j>_ref1;col=0<=_ref1?++_j:--_j){sum=0;for(i=_k=0,_ref2=matrix_A.col();0<=_ref2?_k<_ref2:_k>_ref2;i=0<=_ref2?++_k:--_k){sum+=matrix_A.matrix[row][i]*matrix_B.matrix[i][col]}array.push(sum)}answer.push(array)}return new Matrix(answer)};Matrix.norm=function(matrix){var col,row,square,_i,_j,_len,_len1,_ref;square=0;_ref=matrix.matrix;for(_i=0,_len=_ref.length;_i<_len;_i++){row=_ref[_i];for(_j=0,_len1=row.length;_j<_len1;_j++){col=row[_j];square+=col*col}}return Math.sqrt(square)};return Matrix}()}).call(this)},{}],5:[function(require,module,exports){(function(){var Models,NeuralNetwork;Models={};module.exports=Models;NeuralNetwork=require("./neuralnetwork/neuralnetwork");Models.NeuralNetwork=NeuralNetwork}).call(this)},{"./neuralnetwork/neuralnetwork":9}],6:[function(require,module,exports){(function(){var Matrix,Sigmoid;Matrix=require("../../math/matrix").Matrix;module.exports.Sigmoid=Sigmoid=function(){function Sigmoid(layer_name,dim,basis_function){this.layer_name=layer_name;this.dim=dim;this.basis_function=basis_function!=null?basis_function:null;return}Sigmoid.prototype.w=function(){return this.w};Sigmoid.prototype.dim=function(){return this.dim};Sigmoid.prototype.phi=function(){};Sigmoid.prototype.setup=function(n_in){if(n_in==null){n_in=0}return this.w=Matrix.zeros(n_in,this.dim)};Sigmoid.prototype.fprop=function(n_in){return this.sigmoid(Matrix.dot(n_in,this.w).matrix)};Sigmoid.prototype.classify=function(n_in){if(this.fprop(n_in)>=.5){return 1}else{return 0}};Sigmoid.prototype.sigmoid=function(x){return 1/(1+Math.exp(-x))};return Sigmoid}()}).call(this)},{"../../math/matrix":4}],7:[function(require,module,exports){(function(){var LogisticRegression,Matrix;Matrix=require("../../math/matrix").Matrix;module.exports.LogisticRegression=LogisticRegression=function(){function LogisticRegression(layer,is_classify){this.layer=layer;this.is_classify=is_classify!=null?is_classify:false;return}LogisticRegression.prototype.layer=function(){return this.layer};LogisticRegression.prototype.setup=function(nvis){var n_in;this.nvis=nvis;return this.layer.setup(n_in=this.nvis)};LogisticRegression.prototype.getParams=function(){return{w:[this.layer.w.matrix],dim:[this.nvis,this.layer.dim]}};LogisticRegression.prototype.fprop=function(n_in,detail){if(detail==null){detail=false}if(detail){return[n_in.matrix[0],[this.layer.fprop(n_in)]]}else{return this.layer.fprop(n_in)}};LogisticRegression.prototype.predict=function(n_in){if(this.is_classify){return this.layer.classify(n_in)}else{return this.layer.fprop(n_in)}};return LogisticRegression}()}).call(this)},{"../../math/matrix":4}],8:[function(require,module,exports){(function(){var MLP,Matrix;Matrix=require("../../math/matrix").Matrix;module.exports.MLP=MLP=function(){function MLP(layers,nvis){this.layers=layers;this.nvis=nvis;this.setup()}MLP.prototype.layers=function(){return this.layers};MLP.prototype.setup=function(){var i,n_in,_i,_ref,_results;console.log("setup");_results=[];for(i=_i=0,_ref=this.layers.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){if(i===0){_results.push(this.layers[i].setup(n_in=this.nvis))}else{_results.push(this.layers[i].setup(n_in=this.layers[i-1].dim))}}return _results};MLP.prototype.predict=function(n_in){var layer,_i,_len,_ref;_ref=this.layers;for(_i=0,_len=_ref.length;_i<_len;_i++){layer=_ref[_i];n_in=layer.fprop(n_in)}return n_in};return MLP}()}).call(this)},{"../../math/matrix":4}],9:[function(require,module,exports){(function(){var LogisticRegression,MLP,NeuralNetwork,Sigmoid;LogisticRegression=require("./logistic_regression").LogisticRegression;Sigmoid=require("./base").Sigmoid;MLP=require("./mlp").MLP;NeuralNetwork={};NeuralNetwork.LogisticRegression=LogisticRegression;NeuralNetwork.Sigmoid=Sigmoid;module.exports=NeuralNetwork}).call(this)},{"./base":6,"./logistic_regression":7,"./mlp":8}],10:[function(require,module,exports){(function(){var IRLS,Matrix;Matrix=require("../math/matrix").Matrix;module.exports.IRLS=IRLS=function(){function IRLS(dataset,model,use_bias){var i,nvis,_i,_ref;this.model=model;this.use_bias=use_bias!=null?use_bias:false;this.X=new Matrix(JSON.parse(JSON.stringify(dataset["x"])));this.Y=new Matrix(JSON.parse(JSON.stringify(dataset["y"])));if(this.use_bias=true){for(i=_i=0,_ref=this.X.row();0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){this.X.matrix[i].push(1)}}this.model.setup(nvis=this.X.col())}IRLS.prototype.train=function(){var H,N,R,Y,diff,n,phi,w_new,y_n,_i;N=this.X.row();phi=this.X;R=Matrix.zeros(N,N);Y=[];for(n=_i=0;0<=N?_i<N:_i>N;n=0<=N?++_i:--_i){y_n=this.model.fprop(new Matrix([this.X.matrix[n]]));R.matrix[n][n]=y_n*(1-y_n);Y.push([y_n])}H=Matrix.dot(phi.T(),Matrix.dot(R,phi));w_new=Matrix.sub(this.model.layer.w,Matrix.dot(H.inv(),Matrix.dot(phi.T(),Matrix.sub(new Matrix(Y),this.Y))));diff=Matrix.norm(Matrix.sub(w_new,this.model.layer.w))/Matrix.norm(this.model.layer.w);this.model.layer.w=w_new;return diff};IRLS.prototype.validate=function(){var correct,i,n_in,predict_y,results,_i,_len,_ref;results=[];correct=0;_ref=this.X.matrix;for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){n_in=_ref[i];predict_y=this.model.predict(new Matrix([n_in]));results.push([predict_y]);if(predict_y===this.Y.matrix[i][0]){correct+=1}}return[this.X.matrix,this.Y.matrix,results,100*(correct/this.Y.row())]};IRLS.prototype.fprop=function(n_in,detail){if(detail==null){detail=false}return this.model.fprop(new Matrix([n_in]),detail)};IRLS.prototype.predict=function(n_in){return this.model.predict(new Matrix([n_in]))};return IRLS}()}).call(this)},{"../math/matrix":4}],11:[function(require,module,exports){(function(){var IRLS,Train;Train={};module.exports=Train;IRLS=require("./irls").IRLS;Train.IRLS=IRLS}).call(this)},{"./irls":10}]},{},[1]);